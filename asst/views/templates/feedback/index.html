{% extends "index.html" %}
{% block body %}
    <h2>Feedback</h2>
    Please leave feedback only on what you have personally experienced. <br/>
<div>
    <div>
        Reservations List: <br/>
        <input type="submit" id = 'searchRes' class = "btn btn-primary" value="Search"/>
        </div><br/>
     <div id="resList" style="display: none;">
  <table class="table table-striped" id = 'table'>
    <thead>
      <tr>
        <th>Hotel ID</th>
        <th>Room Type</th>
        <th>Room No</th>
        <th>Services</th>
        <th>Breakfast(s) Ordered</th>
        <th>Review</th>
      </tr>
    </thead>
  </table>
    </div>
    <br/>
<div>
    Review Type:
    <select name="rest" id="rest">
        <option value ="0"> NONE</option>
        <option value="1">Room Review</option>
        <option value="2">Breakfast Review</option>
        <option value="3">Service Review</option>
    </select>
    </div>
<br/>
    <div style = 'display: none;' id = 'RoomRev' ><br/>
        Room Type : <br/>
        <select name="rtype" id="rtype">
            <option value ="rno"> NONE</option>
            <option value="single">Single</option>
            <option value="double">Double</option>
            <option value="deluxe">Deluxe</option>
            <option value="suite">Suite</option>
        </select><br/>&nbsp;
        <br/>
        Rating: <br/>
        <label class="radio-inline"><input type="radio" name="optradio1" value="option1">1/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio1" value="option2">2/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio1" value="option3">3/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio1" value="option4">4/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio1" value="option5">5/5</label>  &nbsp;
        <br/><br/>
        Thoughts on the room? <br/>
        <textarea maxlength = "144" id =description name = 'description' cols = "50" rows = "6" ></textarea>
        <div id ="textarea_feedback"></div>
        <br/>
        <form action = "/feedback/success" method = 'POST'><div><input type="submit" value="Submit"/></div></form>


    </div>
    <div style ='display: none;' id = 'BFRev'><br/>
        Breakfast Type : <br/>
        <select name="bftype" id="bftype">
            <option value ="bno"> NONE</option>
            <option value="Bengali">Bengali</option>
            <option value="American">American</option>
            <option value="Chinese">Chinese</option>
            <option value="Mexican">Mexican</option>
        </select><br/>&nbsp;
        <br/>
         Rating: <br/>
        <label class="radio-inline"><input type="radio" name="optradio2" value="option1">1/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio2" value="option2">2/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio2" value="option3">3/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio2" value="option4">4/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio2" value="option5">5/5</label>  &nbsp;
        <br/><br/>
        Thoughts on the food? <br/>
        <textarea maxlength = "144" id =description2 name = 'description2' cols = "50" rows = "6" ></textarea>
        <div id ="textarea_feedback2"></div>
        <br/>
        <form action = "/feedback/success" method = 'POST'><div><input type="submit" value="Submit"/></div></form>

    </div>
    <div style ='display: none;' id = 'SRev'><br/>
        Services Offered: <br/>
        <select name="stype" id="stype">
            <option value ="sno"> NONE</option>
            <option value="cleaning">Cleaning</option>
            <option value="laundry">Laundry</option>
            <option value="wifi">Wi-Fi</option>
        </select><br/> &nbsp;
        <br/>
        Rating: <br/>
        <label class="radio-inline"><input type="radio" name="optradio3" value="option1">1/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio3" value="option2">2/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio3" value="option3">3/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio3" value="option4">4/5</label>  &nbsp;
        <label class="radio-inline"><input type="radio" name="optradio3" value="option5">5/5</label>  &nbsp;
        <br/><br/>
        Thoughts on the service?<br/>
        <textarea maxlength = "144" id =description3 name = 'description3' cols = "50" rows = "6" ></textarea>
        <div id ="textarea_feedback3"></div>
        <br/>
        <form action = "/feedback/success" method = 'POST'><div><input type="submit" value="Submit"/></div></form>

    </div>
</div>
    <script>
    $( "#searchRes" ).click(function() {
    $("#resList").css('display', 'inline');
    loadReserv()
  });
  </script>
<script>
     function loadReserv(){
    $.ajax({
    url: "/feedback/load_Res",
    type: "POST",
    data: JSON.stringify(),
    contentType: "application/json; charset=utf-8",
    success: function(data) { result = JSON.parse(data);
        console.log(result)
        setReserv(result)
    },
    error: function(xhr, textStatus, errorThrown){
    }
});
</script>
<script>
    $(document).ready(function(){
        $('#rest').on('change',function(){
            if( this.value == '1')
            {
                $("#RoomRev").show();
                $("#BFRev").hide();
                $("#SRev").hide();
            }
            else if(this.value == '2')
            {
                $("#BFRev").show();
                $("#RoomRev").hide();
                $("#SRev").hide();
            }
            else if(this.value == '3')
            {
                $("#SRev").show();
                $("#RoomRev").hide();
                $("#BFRev").hide();
            }
            else
            {
                $("#RoomRev").hide();
                $("#BFRev").hide();
                $("#SRev").hide();
            }
        });
    });
</script>
<script>
    $(document).ready(function() {
    var text_max = 144;
    $('#textarea_feedback').html(text_max + ' characters remaining');

    $('#description').keyup(function() {
        var text_length = $('#description').val().length;
        var text_remaining = text_max - text_length;

        $('#textarea_feedback').html(text_remaining + ' characters remaining');
        });
    });
</script>
<script>
    $(document).ready(function() {
    var text_max = 144;
    $('#textarea_feedback2').html(text_max + ' characters remaining');

    $('#description2').keyup(function() {
        var text_length = $('#description2').val().length;
        var text_remaining = text_max - text_length;

        $('#textarea_feedback2').html(text_remaining + ' characters remaining');
        });
    });
</script>
<script>
    $(document).ready(function() {
    var text_max = 144;
    $('#textarea_feedback3').html(text_max + ' characters remaining');

    $('#description3').keyup(function() {
        var text_length = $('#description3').val().length;
        var text_remaining = text_max - text_length;

        $('#textarea_feedback3').html(text_remaining + ' characters remaining');
        });
    });
   </script>
<script>
   function setReserv(values){
    $("#table tbody tr").remove();
  var mixed = document.getElementById("table");
  var tbody = document.createElement("tbody");
  // for each outer array row
  for (var i = 0 ; i < values.length; i++) {
     var tr = document.createElement("tr");

     // for each inner array cell
     // create td then text, append
     for (var j = 0; j < values[i].length; j++) {
       var td = document.createElement("td");
       var txt = document.createTextNode(values[i][j]);
       td.appendChild(txt);
       tr.appendChild(td);
     }

     // append row to table update
     // IE7 requires append row to tbody, append tbody to table
     // append row to table update
     // IE7 requires append row to tbody, append tbody to table
     tbody.appendChild(tr);
     mixed.appendChild(tbody);
    }
    };
    </script>


{% endblock %}